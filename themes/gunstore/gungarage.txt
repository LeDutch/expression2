#include "library/tomato_lib"
#include "library/tomato_animations"
tauPrecacheMaterial("7187653")
# Automagically Compiled via https://egpcompiler.com (Credits Odin & Bob Tomato)

Dark = vec(50,57,69)

function void animations(Screen:number, ...Args:array) {
    if(Screen == 1) {
        if (!moveTo("GarageDoor", 0.5, vec2(0, -358))) {
            timer("menu", 300)
        }
    }
    elseif(Screen == 2) {
        fadeOut("MaskHeader", 0, 0.5)
        fadeOut("MaskCategory", 0, 0.5)
        fadeOut("MaskInfo", 0, 0.5)
        fadeOut("MaskItems", 0, 0.5)
        if (!moveTo("Footer", 0.5, vec2(0, 435))) {
            timer("footer", 200)
        }
    }
    elseif(Screen == 3) {
        if (!moveTo("GarageDoor", 0.5, vec2(0, 0))) {
            timer("logout", 200)
        }
    }
    elseif(Screen == 4) {
        if(!moveTo("Footer", 0.5, vec2(0, Args[1, number]))) {
            timer("createcart", 100)
        }
    }
    elseif(Screen == 5) {
        moveTo("Footer", 0.5, vec2(0, 435))
        fadeOut("CartMask", 0, 0.5)
    }
    elseif(Screen == 10) {
        fadeOut("MaskSale", 0, 0.5)
    }
}

function void wirelink:clear() {
    This:egpClear()
    Elements:clear()
}
function egpobject text(ID:number, ARGS:table) {
    return EGP:egpTextLayout(ID, ARGS)
}

function egpobject circle(ID:number, ARGS:table) {
    if (ARGS["outline", number]) {
        return EGP:egpCircleOutline(ID, ARGS)
    }
    return EGP:egpCircle(ID, ARGS)
}

function egpobject box(ID:number, ARGS:table) {
    if (ARGS["outline", number]) {
        return EGP:egpRoundedBoxOutline(ID, ARGS)
    }
    return EGP:egpRoundedBox(ID, ARGS)
}

function egpobject line(ID:number, ARGS:table) {
    return EGP:egpBox(ID, ARGS)
}

function createDropdown(Text:string, Size:vector2, Coords:vector2) {
    let ID = Elements:get(Text)
    EGP:egpDrawTopLeft(ID)
    EGP:egpBox(ID, Coords, Size)
    EGP:egpColor(ID, Dark)
        
    let ID2 = Elements:get(Text+"_text")
    EGP:egpText(ID2,Text,vec2(Coords:x()+5, Coords:y()+1))
    EGP:egpSize(ID2,Size:y()-5)
    EGP:egpColor(ID2,White)
        
    let ID3 = Elements:get(Text+"_icon")
    EGP:egpText(ID3,"v",vec2(Coords:x()+Size:x()-15, Coords:y()+3))
    EGP:egpSize(ID3,Size:y()-5)
    EGP:egpColor(ID3,White)
}

function number useDropDown(Text:string, Array:array) {
    let Box = Elements:get(Text)
    if((User:keyPressed("E") & cursorPos(Box))){
        let Coords = EGP:egpPos(Box)
        let Size = EGP:egpSize(Box)
        let Num = Array:count()
        if (EGP:egpColor(Box) == Primary) {
            let ReturnNum = 0
            EGP:egpSize(Box, vec2(Size:x(),25))
            EGP:egpColor(Box, Dark)
            for (I = 1,Num){
                if (cursorPos(Elements:get(Text+"_button"+I))) {
                    EGP:egpSetText(Elements:get(Text+"_text"),Array[I,string])
                    ReturnNum = I
                }
            }
            for (I = 1,Num){
                EGP:egpRemove(Elements:get(Text+"_button"+I))
                EGP:egpRemove(Elements:get(Text+"_text"+I))
                EGP:egpRemove(Elements:get(Text+"_row"+I))
                EGP:egpRemove(Elements:get("CategoryLip1"))
                EGP:egpRemove(Elements:get("CategoryLip2"))
                EGP:egpRemove(Elements:get("CategoryLip3"))
            }
            return ReturnNum
        }
        else {
            EGP:egpSize(Box, vec2(Size:x(),Size:y()+Num*Size:y()-1))
            for (I = 1,Num){
                let ID = Elements:get(Text+"_button"+I)
                EGP:egpDrawTopLeft(ID)
                EGP:egpBox(ID, vec2(Coords:x(),Coords:y()+I*Size:y()), vec2(Size:x(),Size:y()))
                EGP:egpColor(ID, Dark + vec(10,10,10))
                
                let ID2 = Elements:get(Text+"_text"+I)
                createText(Text+"_text"+I, size(16), color(Dark), coords(vec2(Coords:x()+5,Coords:y()+I*Size:y()+5)))
                EGP:egpSetText(ID2,Array[I,string])
                EGP:egpColor(ID2, White)
                
                let ID3 = Elements:get(Text+"_row"+I)
                EGP:egpBox(ID3, vec2(Coords:x(),Coords:y()+I*Size:y()-1), vec2(Size:x(),1))
                EGP:egpColor(ID3, White)
            }
            
            EGP:egpColor(Box, Primary)
        }
    }
    return 0
}

function void createCart(Text:string, Page:number, Items:table) {
    let Keys = ""
    let Values = ""
    let Prices = ""
    let Total = 0
    let Count = Items:count() > 10 ? 10 : Items:count()
    let YOffset = 390 - Count * 18
    let ItemKeys = Items:keys()
    for (Index=1, Count) {
        let Item = Items[ItemKeys[Index+(Page-1)*10, string], table]
        let Cart = Item["Cart", number]
        let Price = Cart * Item["Price", number]
        Keys += Item["Name", string] + "\n"
        Values += Cart + "\n"
        Prices += "$" + formatNumber(Price) + "\n"
        Total += Price
        box(Elements:get("Minus"+Index), table("a"=0,"x"=452.0, "y"=YOffset+20+45+(Index-1)*18, "w"=21.0, "h"=21.0, "r"=217, "g"=217, "b"=217, "radius"=0))
        box(Elements:get("MinusSymbol"+Index), table("x"=442.0, "y"=YOffset+20+35+(Index-1)*18, "w"=30.0, "h"=40.0, "r"=217, "g"=217, "b"=217, "radius"=0, "material"="materials/zerochain/zerolib/ui/minus.png"))
        box(Elements:get("Plus"+Index), table("a"=0,"x"=476.0, "y"=YOffset+20+45+(Index-1)*18, "w"=21.0, "h"=21.0, "r"=217, "g"=217, "b"=217, "radius"=0))
        box(Elements:get("PlusSymbol"+Index), table("x"=466.0, "y"=YOffset+20+35+(Index-1)*18, "w"=32, "h"=40.0, "r"=217, "g"=217, "b"=217, "radius"=0, "material"="materials/zerochain/zerolib/ui/plus.png"))
        EGP:egpColor(Elements:get("MinusSymbol"+Index), Red)
        EGP:egpColor(Elements:get("PlusSymbol"+Index), Green)
    }
    
    text(Elements:get("CartTitle"), table("text"="Edit Cart", "x"=280.0, "y"=YOffset+22, "w"= 165.0, "h"=25.0, "r"=255, "g"=255, "b"=255, "size"=20, "halign"=1, "valign"=1))
    text(Elements:get("CartClear"), table("text"="Clear cart", "x"=45.0, "y"=472.0, "w"= 98.0, "h"=31.0, "r"=255, "g"=255, "b"=255, "size"=18, "halign"=0, "valign"=1))
    box(Elements:get("CartDelete"), table("x"=4.0, "y"=467.0, "w"=41.0, "h"=41.0, "r" = 167, "g" = 0, "b" = 0, "radius"=0, "material"="materials/zerochain/zerolib/ui/delete.png"))
    text(Elements:get("CartKeys"), table("text"=Keys, "x"=190.0, "y"=YOffset+20+46, "w"= 150.0, "h"=300.0, "r"=2505, "g"=255, "b"=255, "size"=18, "halign"=0, "valign"=0))
    text(Elements:get("CartPrices"), table("text"=Prices, "x"=340.0, "y"=YOffset+20+46, "w"= 109.0, "h"=300.0, "r"=255, "g"=255, "b"=255, "size"=18, "halign"=0, "valign"=0))
    text(Elements:get("CartValues"), table("text"=Values, "x"=421.0, "y"=YOffset+20+45, "w"= 100.0, "h"=300.0, "r"=255, "g"=255, "b"=255, "size"=18, "halign"=0, "valign"=0))
    if (Count > 10) {
        box(Elements:get("BackCartPage"), table("x"=291.0, "y"=466.0, "w"=32.0, "h"=32.0, "r" = 255, "g" = 255, "b" = 255, "radius"=0, "material"="materials/zerochain/zerolib/ui/icon_back.png"))
        box(Elements:get("NextCartPage"), table("x"=428.0, "y"=466.0, "w"=32.0, "h"=32.0, "r" = 255, "g" = 255, "b" = 255, "radius"=0, "material"="materials/zerochain/zerolib/ui/icon_back.png"))
        EGP:egpAngle(Elements:get("NextCartPage"), vec2(438.0, 466.0), vec2(0, -32.0), -180) 
        text(Elements:get("CartTotal"), table("text"="Total: $" + formatNumber(Total), "x"=0.0, "y"=240.0, "w"= 155.0, "h"=272.0, "r"=255, "g"=255, "b"=255, "size"=18, "halign"=1, "valign"=1))
    }
    else {
        text(Elements:get("CartTotal"), table("text"="Total: $" + formatNumber(Total), "x"=400.0, "y"=472.0, "w"=102.0, "h"=35.0, "r"=255, "g"=255, "b"=255, "size"=18, "halign"=2, "valign"=1))
    }

}

function void deleteCart() {
    EGP:egpRemove(Elements:get("CartTitle"))
    EGP:egpRemove(Elements:get("CartKeys"))
    EGP:egpRemove(Elements:get("CartPrices"))
    EGP:egpRemove(Elements:get("CartValues"))
    EGP:egpRemove(Elements:get("CartTotal"))
    EGP:egpRemove(Elements:get("CartDelete"))
    EGP:egpRemove(Elements:get("CartClear"))
    EGP:egpRemove(Elements:get("CartPageNum"))
    EGP:egpRemove(Elements:get("NextCartPage"))
    EGP:egpRemove(Elements:get("BackCartPage"))
    for (I=1, 10) {
        EGP:egpRemove(Elements:get("Minus"+I))
        EGP:egpRemove(Elements:get("MinusSymbol"+I))
        EGP:egpRemove(Elements:get("Plus"+I))
        EGP:egpRemove(Elements:get("PlusSymbol"+I))
    }
}

function void itemCart(I:number, Item:table, Gap:number, Cart:table, Tax:number, Discount:number) {
    let Cart1 = Elements:get("Cart1"+I)
    if (EGP:egpHasObject(Cart1)) {
        EGP:egpRemove(Cart1)
        EGP:egpRemove(Elements:get("Cart2"+I))
        EGP:egpRemove(Elements:get("Cart3"+I))
        EGP:egpRemove(Elements:get("Cart4"+I))
        EGP:egpRemove(Elements:get("Cart5"+I))
        EGP:egpRemove(Elements:get("Cart6"+I))
        EGP:egpRemove(Elements:get("Cart7"+I))
        EGP:egpRemove(Elements:get("Cart8"+I))
        EGP:egpRemove(Elements:get("Cart9"+I))
        EGP:egpRemove(Elements:get("Cart10"+I))
        EGP:egpRemove(Elements:get("Cart11"+I))
    }
    
    let Amount = Item["Cart", number]
    let NetTotal = Cart["NetTotal", number]
    let Total = Cart["Total", number] - Discount
    let Format = "Net Total: $" + NetTotal + "\nGST: " + Tax + "%\nDiscount: $" + Discount + "\n\nTotal: $" + Total
    EGP:egpSetText(Elements:get("CartNum"), "Cart (" + Cart["Count", number] + ")")
    EGP:egpSetText(Elements:get("Cart"), Format)
    text(Elements:get("CartAmount"+I), table("text"=Amount+"x", "x"=427.0, "y"=(I-1)*(40+Gap)+128.0, "w"= 52.0, "h"=40.0, "r"=255, "g"=255, "b"=255, "size"=21, "halign"=1, "valign"=1))
}

function void itemCreate(I:number, Item:table, Gap:number, Cart:table, Tax:number, Discount:number) {
    # Item Section
    box(Elements:get("Item"+I), table("a"=255, "x"=32.0, "y"=(I-1)*(40+Gap)+128.0, "w"=447.0, "h"=40.0, "r"=34, "g"=40, "b"=49, "radius"=0))
    text(Elements:get("ItemName"+I), table("a"=255, "text"=Item["Name", string], "x"=57.0, "y"=(I-1)*(40+Gap)+128.0, "w"= 150.0, "h"=40.0, "r"=255, "g"=255, "b"=255, "size"=21, "halign"=0, "valign"=1))
    text(Elements:get("ItemPrice"+I), table("a"=255, "text"="$"+formatNumber(Item["Price", number]), "x"=208.0, "y"=(I-1)*(40+Gap)+128.0, "w"= 88.0, "h"=40.0, "r"=255, "g"=255, "b"=255, "size"=21, "halign"=0, "valign"=1))
    text(Elements:get("ItemStock"+I), table("a"=255, "text"=Item["Stock", number]+"x", "x"=303.0, "y"=(I-1)*(40+Gap)+128.0, "w"= 73.0, "h"=40.0, "r"=255, "g"=255, "b"=255, "size"=21, "halign"=1, "valign"=1))
    box(Elements:get("ItemCorner1"+I), table("a"=255, "x"=24.8, "y"=(I-1)*(40+Gap)+162.27, "w"=10.02, "h"=18.14, "r"=0, "g"=0, "b"=0, "radius"=0))
    EGP:egpAngle(Elements:get("ItemCorner1"+I), vec2(24.8, (I-1)*(40+Gap)+162.27), vec2(0, 0), 45.0)
    box(Elements:get("ItemBuy"+I), table("a"=255, "x"=427.0, "y"=(I-1)*(40+Gap)+128.0, "w"=52.0, "h"=40.0, "r"=21, "g"=74, "b"=34, "radius"=0))
    box(Elements:get("ItemCorner2"+I), table("a"=255, "x"=467.0, "y"=(I-1)*(40+Gap)+127.57, "w"=8.35, "h"=17.69, "r"=0, "g"=0, "b"=0, "radius"=0))
    EGP:egpAngle(Elements:get("ItemCorner2"+I), vec2(467.0, (I-1)*(40+Gap)+127.57), vec2(0, 0), 45.0)

    if(Cart["Items", table]:exists(Item["Name", string])) {
        itemCart(I, Item, Gap, Cart, Tax, Discount)
    }
    else {
        EGP:egpRemove(Elements:get("CartAmount"+I))
        # Add to cart Section
        box(Elements:get("Cart1"+I), table("a"=255, "x"=437.0, "y"=(I-1)*(40+Gap)+136.0, "w"=5.0, "h"=2.0, "r"=255, "g"=255, "b"=255, "radius"=1.0))
        box(Elements:get("Cart2"+I), table("a"=255, "x"=442.0, "y"=(I-1)*(40+Gap)+137.0, "w"=13.01, "h"=2.06, "r"=255, "g"=255, "b"=255, "radius"=0))
        EGP:egpAngle(Elements:get("Cart2"+I), vec2(442.0, (I-1)*(40+Gap)+137.0), vec2(0, 0), -64.92)
        box(Elements:get("Cart3"+I), table("a"=255, "x"=458.0, "y"=(I-1)*(40+Gap)+139.0, "w"=6.0, "h"=2.0, "r"=255, "g"=255, "b"=255, "radius"=1.0))
        box(Elements:get("Cart4"+I), table("a"=255, "x"=462.29, "y"=(I-1)*(40+Gap)+138.83, "w"=2.21, "h"=11.99, "r"=255, "g"=255, "b"=255, "radius"=1.0))
        EGP:egpAngle(Elements:get("Cart4"+I), vec2(462.29, (I-1)*(40+Gap)+138.83), vec2(0, 0), -28.96)
        box(Elements:get("Cart5"+I), table("a"=255, "x"=445.0, "y"=(I-1)*(40+Gap)+148.0, "w"=14.0, "h"=2.0, "r"=255, "g"=255, "b"=255, "radius"=1.0))
        box(Elements:get("Cart6"+I), table("a"=255, "x"=443.0, "y"=(I-1)*(40+Gap)+153.0, "w"=18.0, "h"=2.0, "r"=255, "g"=255, "b"=255, "radius"=1.0))
        box(Elements:get("Cart7"+I), table("a"=255, "x"=445.29, "y"=(I-1)*(40+Gap)+148.67, "w"=2.32, "h"=6.01, "r"=255, "g"=255, "b"=255, "radius"=1.0))
        EGP:egpAngle(Elements:get("Cart8"+I), vec2(445.29, (I-1)*(40+Gap)+148.67), vec2(0, 0), -29.02)
        circle(Elements:get("Cart9"+I), table("a"=255, "x"=445.5, "y"=(I-1)*(40+Gap)+159.5, "w"=2.5, "h"=2.5, "r"=255, "g"=255, "b"=255))
        circle(Elements:get("Cart10"+I), table("a"=255, "x"=458.5, "y"=(I-1)*(40+Gap)+159.5, "w"=2.5, "h"=2.5, "r"=255, "g"=255, "b"=255))
        box(Elements:get("Cart11"+I), table("a"=255, "x"=459.0, "y"=(I-1)*(40+Gap)+146.0, "w"=16.0, "h"=16.0, "r" = 255, "g" = 255, "b" = 255, "radius"=0, "material"="materials/zerochain/zerolib/ui/icon_back.png"))
        EGP:egpAngle(Elements:get("Cart11"+I), vec2(459.0, (I-1)*(40+Gap)+146.0), vec2(0, -16.0), 90)
    }
}

function void itemDelete(I:number) {
    EGP:egpAlpha(Elements:get("Item"+I), 0)
    EGP:egpAlpha(Elements:get("ItemName"+I), 0)
    EGP:egpAlpha(Elements:get("ItemPrice"+I), 0)
    EGP:egpAlpha(Elements:get("ItemStock"+I), 0)
    EGP:egpAlpha(Elements:get("ItemCorner1"+I), 0)
    EGP:egpAlpha(Elements:get("ItemCorner2"+I), 0)
    EGP:egpAlpha(Elements:get("ItemBuy"+I), 0)
    EGP:egpAlpha(Elements:get("Cart1"+I), 0)
    EGP:egpAlpha(Elements:get("Cart2"+I), 0)
    EGP:egpAlpha(Elements:get("Cart3"+I), 0)
    EGP:egpAlpha(Elements:get("Cart4"+I), 0)
    EGP:egpAlpha(Elements:get("Cart5"+I), 0)
    EGP:egpAlpha(Elements:get("Cart6"+I), 0)
    EGP:egpAlpha(Elements:get("Cart7"+I), 0)
    EGP:egpAlpha(Elements:get("Cart8"+I), 0)
    EGP:egpAlpha(Elements:get("Cart9"+I), 0)
    EGP:egpAlpha(Elements:get("Cart10"+I), 0)
    EGP:egpAlpha(Elements:get("Cart11"+I), 0)
    EGP:egpAlpha(Elements:get("CartAmount"+I), 0)
}    

function void screen_initial(DoorOpen:number) {
    let Y = DoorOpen ? -358 : 0
    
    EGP:egpClear()
    EGP:egpDrawTopLeft(1)
    
    box(Elements:get("Background"), table("x"=0, "y"=0, "w"=512.0, "h"=512.0, "r"=17, "g"=20, "b"=25, "radius"=0))
    text(Elements:get("Credits"), table("text"="A Tomato Production", "x"=0.0, "y"=492.0, "w"= 512.0, "h"=20.0, "r"=255, "g"=255, "b"=255, "size"=15, "halign"=1, "valign"=1))

    let Door = box(Elements:get("GarageDoor"), table("x"=0.0, "y"=Y, "w"=512.0, "h"=430.0, "r"=34, "g"=40, "b"=49, "radius"=0))
    let Lip1 = box(Elements:get("GarageLip1"), table("x"=247.0, "y"=427.0, "w"=207.0, "h"=25.0, "r"=34, "g"=40, "b"=49, "radius"=0))
    let Lip2 = box(Elements:get("GarageLip2"), table("x"=443.0, "y"=436.28, "w"=51.0, "h"=19.0, "r"=34, "g"=40, "b"=49, "radius"=0))
    let Lip3 = box(Elements:get("GarageLip3"), table("x"=257.98, "y"=436.28, "w"=51.0, "h"=19.0, "r"=34, "g"=40, "b"=49, "radius"=0))
    let Text = text(Elements:get("Start"), table("text"="Press E to start", "x"=141.0, "y"=306.0, "w"= 229.0, "h"=65.0, "r"=255, "g"=255, "b"=255, "size"=23, "halign"=1, "valign"=1))
    let Logo = box(Elements:get("Logo"), table("x"=107.0, "y"=138.0, "w"=297.0, "h"=126.0, "r" = 255, "g" = 255, "b" = 255, "radius"=0, "material"="../data/tau/cache/files/1a2b6f5882d9172b9a0772323b6b7f71.png"))
    
    let Icon = box(Elements:get("Icon"), table("x"=262.0, "y"=264.0, "w"=285.0, "h"=41.0, "r" = 255, "g" = 255, "b" = 255, "radius"=0, "material"="materials/zerochain/zerolib/ui/hud_infopointer.png"))
    
    EGP:egpAngle(Elements:get("GarageLip2"), vec2(443.0, 436.28), vec2(0, 0), 33.68)
    EGP:egpAngle(Elements:get("GarageLip3"), vec2(257.98, 436.28), vec2(0, -19.0), 146)
    EGP:egpAngle(Elements:get("Icon"), vec2(262.0, 264.0), vec2(0, -41.0), -180)
    
    EGP:egpParent(Lip1, Door)
    EGP:egpParent(Lip2, Door)
    EGP:egpParent(Lip3, Door)
    EGP:egpParent(Logo, Door)
    EGP:egpParent(Icon, Door)
    EGP:egpParent(Text, Door)
}                 

function void screen_footer(Discount:number, Tax, Cart:table, Down:number) {
    let Y = 0
    let NetTotal = Cart["NetTotal", number]
    let Total = Cart["Total", number] - Discount
    let Format = "Net Total: $" + NetTotal + "\nGST: " + Tax + "%\nDiscount: $" + Discount +"\n\nTotal: $" + Total
    if(Down) {
        Y = 100
    }
    # Footer Section
    let Footer = box(Elements:get("Footer"), table("x"=0.0, "y"=Y+435.0, "w"=512.0, "h"=500.0, "r"=34, "g"=40, "b"=49, "radius"=0))
    let FooterElements = array()
    FooterElements:pushEgpobject(box(Elements:get("CartButton"), table("x"=54.0, "y"=Y-435-Y+421.0, "w"=39.0, "h"=40.0, "r"=0, "g"=0, "b"=0, "radius"=0)))
    FooterElements:pushEgpobject(box(Elements:get("Rectangle273"), table("x"=230.0, "y"=Y-435-Y+413.0, "w"=282.0, "h"=22.0, "r"=34, "g"=40, "b"=49, "radius"=0)))
    FooterElements:pushEgpobject(circle(Elements:get("CartCircle"), table("x"=74.0, "y"=Y-435-Y+440.0, "w"=29.0, "h"=29.0, "r"=255, "g"=255, "b"=255)))
    FooterElements:pushEgpobject(box(Elements:get("Rectangle274"), table("x"=173.0, "y"=Y-435-Y+435.58, "w"=64.37, "h"=22.82, "r"=34, "g"=40, "b"=49, "radius"=0)))
    FooterElements:pushEgpobject(box(Elements:get("FooterIcon"), table("x"=60.0, "y"=Y-435-Y+402.0, "w"=343.0, "h"=49.0, "r" = 255, "g" = 255, "b" = 255, "radius"=0, "material"="materials/zerochain/zerolib/ui/hud_infopointer.png")))
    FooterElements:pushEgpobject(box(Elements:get("Rectangle275"), table("x"=0.0, "y"=Y-435-Y+434.0, "w"=48.0, "h"=10.0, "r"=255, "g"=255, "b"=255, "radius"=0)))
    FooterElements:pushEgpobject(box(Elements:get("Rectangle305"), table("x"=57.0, "y"=Y-435-Y+426.0, "w"=5.0, "h"=3.0, "r"=0, "g"=0, "b"=0, "radius"=1.0)))
    FooterElements:pushEgpobject(box(Elements:get("Rectangle297"), table("x"=61.92, "y"=Y-435-Y+425.75, "w"=20.68, "h"=2.42, "r"=0, "g"=0, "b"=0, "radius"=1.0)))
    FooterElements:pushEgpobject(box(Elements:get("Rectangle298"), table("x"=62.0, "y"=Y-435-Y+430.0, "w"=30.0, "h"=3.0, "r"=0, "g"=0, "b"=0, "radius"=1.0)))
    FooterElements:pushEgpobject(box(Elements:get("Rectangle299"), table("x"=90.16, "y"=Y-435-Y+430.26, "w"=2.17, "h"=15.68, "r"=0, "g"=0, "b"=0, "radius"=1.0)))
    FooterElements:pushEgpobject(box(Elements:get("Rectangle300"), table("x"=66.0, "y"=Y-435-Y+443.0, "w"=22.0, "h"=3.0, "r"=0, "g"=0, "b"=0, "radius"=1.0)))
    FooterElements:pushEgpobject(box(Elements:get("Rectangle301"), table("x"=72.0, "y"=Y-435-Y+437.0, "w"=17.0, "h"=2.0, "r"=0, "g"=0, "b"=0, "radius"=1.0)))
    FooterElements:pushEgpobject(circle(Elements:get("Ellipse85"), table("x"=67.5, "y"=Y-435-Y+451.4, "w"=3.5, "h"=3.5, "r"=0, "g"=0, "b"=0)))
    FooterElements:pushEgpobject(circle(Elements:get("Ellipse86"), table("x"=84.5, "y"=Y-435-Y+451.4, "w"=3.5, "h"=3.5, "r"=0, "g"=0, "b"=0)))
    FooterElements:pushEgpobject(text(Elements:get("CartNum"), table("text"="Cart (" + Cart["Count", number] + ")", "x"=8.0, "y"=100-435-100+468.0, "w"= 131.0, "h"=40.0, "r"=255, "g"=255, "b"=255, "size"=15, "halign"=1, "valign"=1))) 
    EGP:egpAngle(Elements:get("Rectangle299"), vec2(90.16, Y-435-Y+430.26), vec2(0, 0), -16.66)
    EGP:egpAngle(Elements:get("Rectangle297"), vec2(61.92, Y-435-Y+425.75), vec2(0, 0), -72.68)
    EGP:egpAngle(Elements:get("Rectangle274"), vec2(173.0, Y-435-Y+435.58), vec2(0, 0), 22.45)
    
    # Cart Section
    FooterElements:pushEgpobject(box(Elements:get("Checkout"), table("x"=366.0, "y"=Y-435-Y+440.0, "w"=120.0, "h"=48.0, "r"=21, "g"=74, "b"=34, "radius"=0)))
    FooterElements:pushEgpobject(text(Elements:get("CheckoutText"), table("text"="Checkout", "x"=366.0, "y"=Y-435-Y+440.0, "w"= 120.0, "h"=48.0, "r"=255, "g"=255, "b"=255, "size"=19, "halign"=1, "valign"=1)))
    FooterElements:pushEgpobject(box(Elements:get("Rectangle315"), table("x"=356.0, "y"=Y-435-Y+443.61, "w"=20.66, "h"=14.11, "r"=34, "g"=40, "b"=49, "radius"=0)))
    FooterElements:pushEgpobject(box(Elements:get("Rectangle316"), table("x"=471.0, "y"=Y-435-Y+490.61, "w"=20.66, "h"=14.11, "r"=34, "g"=40, "b"=49, "radius"=0)))
    FooterElements:pushEgpobject(text(Elements:get("Cart"), table("text"=Format, "x"=232.0, "y"=100-435-100+413.0, "w"= 200.0, "h"=99.0, "r"=255, "g"=255, "b"=255, "size"=15, "halign"=0, "valign"=1)))
    FooterElements:pushEgpobject(box(Elements:get("CartMask"), table("x"=232.0, "y"=Y-435+425.0, "w"=269.0, "h"=85.0, "r"=34, "g"=40, "b"=49, "radius"=0, "a"=0)))
    EGP:egpAngle(Elements:get("Rectangle316"), vec2(471.0, Y-435-Y+490.61), vec2(0, 0), 45.0)
    EGP:egpAngle(Elements:get("Rectangle315"), vec2(356.0, Y-435-Y+443.61), vec2(0, 0), 45.0)
    
    foreach(_:number, Object:egpObject = FooterElements) {
        EGP:egpParent(Object, Footer)
    }
}

function void screen_buy() {
    EGP:egpClear()
    EGP:egpDrawTopLeft(1)
    
    #box(Elements:get("Background"), table("x"=0, "y"=0, "w"=512.0, "h"=512.0, "r"=17, "g"=20, "b"=25, "radius"=0))
    text(Elements:get("Credits"), table("text"="A Tomato Production", "x"=0.0, "y"=492.0, "w"= 512.0, "h"=20.0, "r"=255, "g"=255, "b"=255, "size"=15, "halign"=1, "valign"=1))
    
    # Info Section
    text(Elements:get("Name"), table("text"="Name", "x"=57.0, "y"=110.0, "w"= 95.0, "h"=18.0, "r"=255, "g"=255, "b"=255, "size"=13, "halign"=0, "valign"=1))
    text(Elements:get("Price"), table("text"="Price", "x"=208.0, "y"=110.0, "w"= 82.0, "h"=18.0, "r"=255, "g"=255, "b"=255, "size"=13, "halign"=0, "valign"=1))
    text(Elements:get("Stock"), table("text"="Stock", "x"=306.0, "y"=110.0, "w"= 68.0, "h"=18.0, "r"=255, "g"=255, "b"=255, "size"=13, "halign"=1, "valign"=1))
    text(Elements:get("AddtoCart"), table("text"="Add to Cart", "x"=419.0, "y"=110.0, "w"= 68.0, "h"=18.0, "r"=255, "g"=255, "b"=255, "size"=13, "halign"=1, "valign"=1))
    box(Elements:get("BackPage"), table("x"=41.0, "y"=79.0, "w"=32.0, "h"=32.0, "r" = 255, "g" = 255, "b" = 255, "radius"=0, "material"="materials/zerochain/zerolib/ui/icon_back.png"))
    box(Elements:get("NextPage"), table("x"=178.0, "y"=79.0, "w"=32.0, "h"=32.0, "r" = 255, "g" = 255, "b" = 255, "radius"=0, "material"="materials/zerochain/zerolib/ui/icon_back.png"))
    EGP:egpAngle(Elements:get("NextPage"), vec2(178.0, 79.0), vec2(0, -32.0), -180)
    text(Elements:get("PageNum"), table("text"="Page 1/1", "x"=78.0, "y"=81.0, "w"= 84.0, "h"=29.0, "r"=255, "g"=255, "b"=255, "size"=17, "halign"=0, "valign"=1))

    # Header Section
    box(Elements:get("Rectangle259"), table("x"=0.0, "y"=0.0, "w"=512.0, "h"=72.0, "r"=34, "g"=40, "b"=49, "radius"=0))
    box(Elements:get("Logo"), table("x"=14.0, "y"=11.0, "w"=118.0, "h"=50.0, "r" = 255, "g" = 255, "b" = 255, "radius"=0, "material"="../data/tau/cache/files/1a2b6f5882d9172b9a0772323b6b7f71.png"))
    box(Elements:get("Rectangle267"), table("x"=247.0, "y"=69.0, "w"=207.0, "h"=25.0, "r"=34, "g"=40, "b"=49, "radius"=0))
    box(Elements:get("Rectangle268"), table("x"=443.0, "y"=78.28, "w"=51.0, "h"=19.0, "r"=34, "g"=40, "b"=49, "radius"=0))
    EGP:egpAngle(Elements:get("Rectangle268"), vec2(443.0, 78.28), vec2(0, 0), 33.68)
    box(Elements:get("Rectangle269"), table("x"=257.98, "y"=78.28, "w"=51.0, "h"=19.0, "r"=34, "g"=40, "b"=49, "radius"=0))
    EGP:egpAngle(Elements:get("Rectangle269"), vec2(257.98, 78.28), vec2(0, -19.0), 146)
    box(Elements:get("Membership"), table("x"=229.0, "y"=15.0, "w"=243.0, "h"=35.0, "r"=217, "g"=217, "b"=217, "radius"=0))
    text(Elements:get("MembershipText"), table("text"="Get Membership", "x"=229.0, "y"=15.0, "w"= 243.0, "h"=35.0, "r"=17, "g"=20, "b"=25, "size"=18, "halign"=1, "valign"=1))
    box(Elements:get("Rectangle302"), table("x"=461.0, "y"=49.88, "w"=10.7, "h"=16.8, "r"=34, "g"=40, "b"=49, "radius"=0))
    EGP:egpAngle(Elements:get("Rectangle302"), vec2(461.0, 49.88), vec2(0, -16.8), -45)
    box(Elements:get("1" + "Rectangle300"), table("x"=221.0, "y"=19.83, "w"=10.7, "h"=18.14, "r"=34, "g"=40, "b"=49, "radius"=0))
    EGP:egpAngle(Elements:get("1" + "Rectangle300"), vec2(221.0, 19.83), vec2(0, -18.14), -45)
    
    createDropdown("Category", size(vec2(187.0, 25)), coords(vec2(257.0,69)))
}   

function void masks() {
    box(Elements:get("MaskHeader"), table("x"=0.0, "y"=0.0, "w"=512.0, "h"=69.0, "r"=34, "g"=40, "b"=49, "radius"=0))
    box(Elements:get("MaskCategory"), table("x"=252.0, "y"=68.0, "w"=196.0, "h"=26.0, "r"=34, "g"=40, "b"=49, "radius"=0))
    box(Elements:get("MaskInfo"), table("x"=24.0, "y"=81.0, "w"=196.0, "h"=27.0, "r"=17, "g"=20, "b"=25, "radius"=0))
    box(Elements:get("MaskItems"), table("x"=22.0, "y"=109.0, "w"=474.0, "h"=289.0, "r"=17, "g"=20, "b"=25, "radius"=0))
}        

function void saleCreate(I:number, Gap:number, Sale:table) {
    let Name = Sale["Name", string]
    let Revenue = Sale["Revenue", number]
    let Items = Sale["Cart", table]["Items", table]
    let Amount = Sale["ItemCount", number]

    # Sale Section
    box(Elements:get("SaleBox"+I), table("a"=255, "x"=32.0, "y"=(I-1)*(40+Gap)+128.0, "w"=447.0, "h"=40.0, "r"=34, "g"=40, "b"=49, "radius"=0))
    text(Elements:get("SaleName"+I), table("a"=255, "text"=Name, "x"=57.0, "y"=(I-1)*(40+Gap)+128.0, "w"= 177.0, "h"=40.0, "r"=255, "g"=255, "b"=255, "size"=17, "halign"=0, "valign"=1))
    text(Elements:get("SaleAmount"+I), table("a"=255,"text"="$"+formatNumber(Revenue), "x"=237.0, "y"=(I-1)*(40+Gap)+128.0, "w"= 88.0, "h"=40.0, "r"=255, "g"=255, "b"=255, "size"=17, "halign"=0, "valign"=1))
    text(Elements:get("SaleItems"+I), table("a"=255, "text"=toString(Amount), "x"=340.0, "y"=(I-1)*(40+Gap)+128.0, "w"=100.0, "h"=40.0, "r"=255, "g"=255, "b"=255, "size"=17, "halign"=0, "valign"=1))
    box(Elements:get("SaleInfo"+I), table("a"=255,"x"=427.0, "y"=(I-1)*(40+Gap)+128.0, "w"=52.0, "h"=40.0, "r"=0, "g"=125, "b"=174, "radius"=0))
    box(Elements:get("SaleCorner1"+I), table("a"=255, "x"=24.8, "y"=(I-1)*(40+Gap)+162.27, "w"=10.02, "h"=18.14, "r"=0, "g"=0, "b"=0, "radius"=0))
    EGP:egpAngle(Elements:get("SaleCorner1"+I), vec2(24.8, (I-1)*(40+Gap)+162.27), vec2(0, 0), 45.0)
    box(Elements:get("SaleCorner2"+I), table("a"=255, "x"=467.0, "y"=(I-1)*(40+Gap)+127.57, "w"=8.35, "h"=17.69, "r"=0, "g"=0, "b"=0, "radius"=0))
    EGP:egpAngle(Elements:get("SaleCorner2"+I), vec2(467.0, (I-1)*(40+Gap)+127.57), vec2(0, 0), 45.0)
    box(Elements:get("InfoIcon"+I), table("a"=255, "x"=438.0, "y"=(I-1)*(40+Gap)+134.0, "w"=29.0, "h"=29.0, "r" = 255, "g" = 255, "b" = 255, "radius"=0, "material"="materials/zerochain/zerolib/ui/icon_info.png"))
}

function void saleDelete(I:number) {
    EGP:egpRemove(Elements:get("SaleBox"+I))
    EGP:egpRemove(Elements:get("SaleName"+I))
    EGP:egpRemove(Elements:get("SaleAmount"+I))
    EGP:egpRemove(Elements:get("SaleItems"+I))
    EGP:egpRemove(Elements:get("SaleInfo"+I))
    EGP:egpRemove(Elements:get("SaleCorner1"+I))
    EGP:egpRemove(Elements:get("SaleCorner2"+I))
    EGP:egpRemove(Elements:get("InfoIcon"+I))
}  

function void screen_admin() {
    EGP:clear()
    EGP:egpDrawTopLeft(1)

    #box(Elements:get("Background"), table("x"=0, "y"=0, "w"=512.0, "h"=512.0, "r"=0, "g"=0, "b"=0, "radius"=0))
    box(Elements:get("Rectangle319"), table("x"=0.0, "y"=435.0, "w"=157.0, "h"=34.0, "r"=255, "g"=255, "b"=255, "radius"=0))
    box(Elements:get("Rectangle320"), table("x"=96.0, "y"=469.48, "w"=105.11, "h"=22.91, "r"=34, "g"=40, "b"=49, "radius"=0))
    EGP:egpAngle(Elements:get("Rectangle320"), vec2(96.0, 469.48), vec2(0, 0), 22.65)
    box(Elements:get("Rectangle322"), table("x"=142.83, "y"=315.79, "w"=21.05, "h"=19.74, "r"=0, "g"=0, "b"=0, "radius"=0))
    EGP:egpAngle(Elements:get("Rectangle322"), vec2(142.83, 315.79), vec2(0, -19.74), -45)

    # Info Section
    text(Elements:get("Name"), table("text"="Name", "x"=57.0, "y"=110.0, "w"= 95.0, "h"=18.0, "r"=255, "g"=255, "b"=255, "size"=13, "halign"=0, "valign"=1))
    text(Elements:get("Sale"), table("text"="Sale", "x"=237.0, "y"=110.0, "w"= 82.0, "h"=18.0, "r"=255, "g"=255, "b"=255, "size"=13, "halign"=0, "valign"=1))
    text(Elements:get("Items"), table("text"="Items", "x"=337.0, "y"=110.0, "w"= 82.0, "h"=18.0, "r"=255, "g"=255, "b"=255, "size"=13, "halign"=0, "valign"=1))
    text(Elements:get("Info"), table("text"="Info", "x"=440.0, "y"=110.0, "w"= 56.0, "h"=18.0, "r"=255, "g"=255, "b"=255, "size"=13, "halign"=0, "valign"=1))
    box(Elements:get("BackPage"), table("x"=41.0, "y"=79.0, "w"=32.0, "h"=32.0, "r" = 255, "g" = 255, "b" = 255, "radius"=0, "material"="materials/zerochain/zerolib/ui/icon_back.png"))
    box(Elements:get("NextPage"), table("x"=178.0, "y"=79.0, "w"=32.0, "h"=32.0, "r" = 255, "g" = 255, "b" = 255, "radius"=0, "material"="materials/zerochain/zerolib/ui/icon_back.png"))
    EGP:egpAngle(Elements:get("NextPage"), vec2(178.0, 79.0), vec2(0, -32.0), -180)
    text(Elements:get("PageNum"), table("text"="Page 1/1", "x"=78.0, "y"=81.0, "w"= 84.0, "h"=29.0, "r"=255, "g"=255, "b"=255, "size"=17, "halign"=0, "valign"=1))

    # Header Section
    box(Elements:get("Rectangle259"), table("x"=0.0, "y"=0.0, "w"=512.0, "h"=72.0, "r"=34, "g"=40, "b"=49, "radius"=0))
    box(Elements:get("Logo"), table("x"=14.0, "y"=11.0, "w"=118.0, "h"=50.0, "r" = 255, "g" = 255, "b" = 255, "radius"=0, "material"="../data/tau/cache/files/1a2b6f5882d9172b9a0772323b6b7f71.png"))
    box(Elements:get("Rectangle267"), table("x"=247.0, "y"=69.0, "w"=207.0, "h"=25.0, "r"=34, "g"=40, "b"=49, "radius"=0))
    box(Elements:get("Rectangle268"), table("x"=443.0, "y"=78.28, "w"=51.0, "h"=19.0, "r"=34, "g"=40, "b"=49, "radius"=0))
    EGP:egpAngle(Elements:get("Rectangle268"), vec2(443.0, 78.28), vec2(0, 0), 33.68)
    box(Elements:get("Rectangle269"), table("x"=257.98, "y"=78.28, "w"=51.0, "h"=19.0, "r"=34, "g"=40, "b"=49, "radius"=0))
    EGP:egpAngle(Elements:get("Rectangle269"), vec2(257.98, 78.28), vec2(0, -19.0), 146)
    box(Elements:get("Rectangle1"), table("x"=229.0, "y"=15.0, "w"=243.0, "h"=35.0, "r"=255, "g"=255, "b"=255, "radius"=0))
    text(Elements:get("AdminMenu"), table("text"="Admin Menu", "x"=229.0, "y"=15.0, "w"= 243.0, "h"=35.0, "r"=0, "g"=0, "b"=0, "size"=18, "halign"=1, "valign"=1))
    box(Elements:get("Rectangle302"), table("x"=461.0, "y"=49.88, "w"=10.7, "h"=16.8, "r"=34, "g"=40, "b"=49, "radius"=0))
    EGP:egpAngle(Elements:get("Rectangle302"), vec2(461.0, 49.88), vec2(0, -16.8), -45)
    box(Elements:get("Rectangle300"), table("x"=221.0, "y"=19.83, "w"=10.7, "h"=18.14, "r"=34, "g"=40, "b"=49, "radius"=0))
    EGP:egpAngle(Elements:get("Rectangle300"), vec2(221.0, 19.83), vec2(0, -18.14), -45)

    createDropdown("Profit Percent", size(vec2(187.0, 25)), coords(vec2(257.0,69)))

    # Footer Section
    box(Elements:get("RectangleFoote"), table("x"=0.0, "y"=435.0, "w"=512.0, "h"=77.0, "r"=34, "g"=40, "b"=49, "radius"=0))
    box(Elements:get("Rectangle273"), table("x"=230.0, "y"=413.0, "w"=282.0, "h"=22.0, "r"=34, "g"=40, "b"=49, "radius"=0))
    circle(Elements:get("Ellipse79"), table("x"=74.0, "y"=440.0, "w"=29.0, "h"=29.0, "r"=255, "g"=255, "b"=255))
    box(Elements:get("Rectangle274"), table("x"=173.0, "y"=435.58, "w"=64.37, "h"=22.82, "r"=34, "g"=40, "b"=49, "radius"=0))
    EGP:egpAngle(Elements:get("Rectangle274"), vec2(173.0, 435.58), vec2(0, 0), 22.45)
    box(Elements:get("FooterIcon"), table("x"=60.0, "y"=403.0, "w"=343.0, "h"=49.0, "r" = 255, "g" = 255, "b" = 255, "radius"=0, "material"="materials/zerochain/zerolib/ui/hud_infopointer.png"))
    box(Elements:get("Rectangle275"), table("x"=0.0, "y"=434.0, "w"=48.0, "h"=10.0, "r"=255, "g"=255, "b"=255, "radius"=0))
    box(Elements:get("Settings"), table("x"=50.0, "y"=416.0, "w"=48.0, "h"=48.0, "r" = 0, "g" = 0, "b" = 0, "radius"=0, "material"="materials/zerochain/zerolib/ui/edit.png"))
    
    # Stats
    box(Elements:get("StatsIcon"), table("x"=209.0, "y"=427.0, "w"=64.0, "h"=64.0, "r" = 255, "g" = 255, "b" = 255, "radius"=0, "material"="materials/zerochain/zerolib/ui/statistic.png"))
    createCheckBox("Disable Store", size(vec2(40,20)),  coords(vec2(15.0,480.0)), 0, 65)
    text(Elements:get("UniqueCustomers"), table("text"="Unique Customers: 0", "x"=282.0, "y"=465.0, "w"= 300.0, "h"=21.0, "r"=255, "g"=255, "b"=255, "size"=15, "halign"=0, "valign"=1))
    text(Elements:get("SessionProfit"), table("text"="Session Profit: $0", "x"=281.0, "y"=442.0, "w"= 300.0, "h"=31.0, "r"=255, "g"=255, "b"=255, "size"=15, "halign"=0, "valign"=1))
    text(Elements:get("TotalProfit"), table("text"="Total Profit: $0", "x"=281.0, "y"=425.0, "w"= 300.0, "h"=28.0, "r"=255, "g"=255, "b"=255, "size"=15, "halign"=0, "valign"=1))
}


