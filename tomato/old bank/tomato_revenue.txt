@name Tomato Bank Stat Display
@outputs [Revenue Customers]:number
@persist [DB]:table
@persist [DSGroup Hash]:string

if (~EGP) {reset()}
if(first() || dupefinished()) {
    #include "library/tomato_lib"
    #Global variables
    
    BankName = "BetterBank"
    Prefix = BankName
    
    
    broadcastRemoteEvent(table())
    timer("display", 0)
}

interval(100)

event remote(Sender:entity, Player:entity, Payload:table) {
    if (Player == owner()) {
        DB = Payload
    }
}
if(clk("display")) {
    Revenue = DB["Profit",table]["Total", number] + DB["Tax",table]["Total", number]
    Customers = DB["Customers",table]:count()
    timer("display", 1000)
}

