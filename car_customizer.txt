@name Tomato Car Customizer
@strict

function number string:startsWith(String:string) {
    return This:left(String:length()) == String
}

event chat(Player:entity, Message:string, Team:number) {
    if (Player == owner() && Message[1] == "!") {
        let Args = Message:sub(2):explode(" ")
        let Command = Args:shiftString()
        let Car = owner():aimEntity()
        hideChat(1)
        if (Car:type():startsWith("prop_vehicle")) {
            switch (Command) {
                case "colour",
                    Car:setColor(vec(Args[1, string]:toNumber(), Args[2, string]:toNumber(), Args[3, string]:toNumber()))
                break
                case "material",
                    Car:setSubMaterial(Args[1, string]:toNumber(), Args[2, string])
                break
                case "body",
                    Car:setBodygroup(Args[1, string]:toNumber(), Args[2, string]:toNumber())
                break
                case "skin",
                    Car:setSkin(Args[1, string]:toNumber())
                break
                case "help",
                    print("!colour r,g,b - i.e !colour 255 255 255")
                    print("!material string - i.e !material brick/brick_model")
                    print("!skin number - i.e !skin 1")
                    print("!body number number - i.e !body 1 1")
                break
            }
            if (Command != "help") {
                print("Changing: " + Command)
            }
        }
        else {
            print("Please look at your car")
        }
    }
}

event keyPressed(Player:entity, Key:string, Down:number, Bind:string) {
    if (Player == owner()) {
        switch (Key) {
            case "mouse_wheel_down",
            break
            case "mouse_wheel_up",
            break
            case "l",
                print(owner():aimEntity():setCollisionGroup(5))
            break
        }
    }
}
