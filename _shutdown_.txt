@name Org Check V2
@inputs Door:wirelink
@outputs 
@persist OrgID:number PlayerScan:array
@strict

function void getOrg(Player:entity) {
    let Org = Player:tauOrg()
    if (Org == OrgID) {
        Door["Fade", number] = 1
        if (!timerExists("close")) {
            timer("close", 6, function() {
                Door["Fade", number] = 0
            })
        }
        else {
            timerRestart("close")
        }
    }
}

if (first() || dupefinished()) {
    OrgID = owner():tauOrg()
}

event keyPressed(Player:entity, Key:string, Down:number, _:string) {
    if (Key == "e") {
        if (Player:aimEntity() == Door:entity()) {
            if (Down) {
                getOrg(Player)
            }
        }
    }
}

